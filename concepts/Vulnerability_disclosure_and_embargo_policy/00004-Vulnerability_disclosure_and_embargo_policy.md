# RFC00004: Vulnerability Disclosure and Embargo Policy
- Authors: [axel simon](github@axelsimon.net)
- Status: [PROPOSED](/README.md#proposed)
- Since: 2020-03-10
- Status Note: under discussion
- Supersedes: N/A
- Start Date: 2020-03-03 (date you started working on this idea)
- Tags: security, infrastructure

## Summary

Describe the security vulnerability disclosure process, including embargoes.

## Motivation

Users and researchers who discover security issues in Enarx need to know that
we welcome their efforts and how we will manage their disclosure. They must
also be able to have an idea of how we use security embargoes.

In other words:
- We want:
  - to encourage reporting of security issues (ie: “attack us!”)
  - to make it easy to report security issues
  - to maintain and extend our policy of safe defaults / discouraging people
  from using bad security practices
  - to recognise and show appreciation for the time spent researching and
  reporting
  - to make it possible for people who may be at risk to report issues
  pseudonymously

- We need:
  - a clear policy, describing both:
    - how to report; and
    - what to expect during the process
  - a main reporting channel:
    - secondary channels, should the main one fail/not be available/be
  overloaded.
  - a list of people who can be reached directly
  - a place to list security reports and give attribution


## Tutorial

This RFC aims to provide a set of documents (wiki pages) that describe the 
Enarx vulnerability disclosure policy and the list of security advisories and
 fixes.

The two pages are "Vulnerability Reporting and Embargo Policy" and "Enarx 
Security Advisories"

--- 
### Vulnerability Reporting and Embargo Policy
The Enarx project aims to be as safe to use as possible and therefore to 
produce code that is as secure as possible. As such, we welcome any and all 
research into Enarx and appreciate your efforts to take the time to 
responsibly disclose any issues you find.

Vulnerabilities may be discovered in:
1. Enarx code
2. Enarx dependencies (including compilers)
3. Enarx documentation
4. 3rd party hardware or firmware

All security bugs in Enarx should be reported by email to security@enarx.io. 
This list is delivered to a small security team. Your email will be 
acknowledged within 48 hours, and you’ll receive a more detailed response to 
your email within 96 hours indicating the next steps in handling your report.
 If you wish, you may encrypt your report using our public key. This key is 
also on keys.openpgp.org and reproduced below.

Be sure to use a descriptive subject line to avoid having your report be 
missed (as with any publicly listed addresses, it is expected this one will 
get a lot of spam). After the initial reply to your report, the security team
 will endeavor to keep you informed of the progress being made towards a fix 
and full announcement. As recommended by 
[RFPolicy](https://dl.packetstormsecurity.net/papers/general/rfpolicy-2.0.txt),
 these updates will be sent at least every five working days.

If you have not received a reply to your email within 72 hours, or have not 
heard from the security team for the past five days, there are a few steps you
 can take (in order):
- Contact the current security coordinator (Nathaniel McCallum (public key)) directly.
- Contact the back-up contact (Mike Bursell (public key)) directly.
- Come chat to us on the [chat](https://gitter.im/enarx/community).

Please note that the chat is a public area. When escalating in these venues,
please do not discuss your issue. 
Simply say that you’re trying to get a hold of someone from the security team.

Should you need to transfer files to us in a private manner, please use 
[Magic Wormhole](https://magic-wormhole.readthedocs.io/en/latest/) or make 
them available over https.


#### Disclosure policy
The Enarx project has a 5 step disclosure process.
1. The security report is received and is assigned a primary handler. 
  This person will coordinate the fix and release process.
2. The problem is confirmed and a list of all affected versions is determined.
3. Code is audited to find any potential similar problems.
4. Fixes are prepared for all releases which are still under maintenance. 
  These fixes are not committed to the public repository but rather held 
  locally pending the announcement.
5. On the embargo date, an announcement is sent to Enarx public channels 
  (chat, website). The changes are pushed to the public repository and new 
  builds are deployed.

This process can take some time, especially when coordination is required 
with maintainers of other projects. Every effort will be made to handle the 
bug in as timely a manner as possible, however it is important that we follow
 the release process above to ensure that the disclosure is handled in a 
consistent manner.

Enarx does not provide financial rewards for security disclosures, but the 
team is open working with reporters of issues on publishing and attribution 
of vulnerabilities and fixes.  We welcome reports of issues to the project, 
and want to ensure that the community is aware of and celebrates security 
improvements.

#### Embargoes
While the Enarx project aims to follow the highest standards of transparency 
and openness (cf. [Enarx Principles](https://github.com/enarx/enarx.github.io/wiki/Design-principles)), 
handling some security issues may pose such an immediate threat to various 
stakeholders and require coordination between various actors that it cannot 
be made immediately public.

In this case, security issues will fall under an embargo.

An embargo can be called for in various cases:
- when disclosing the issue without simultaneously providing a mitigation 
  would seriously endanger users,
- when producing a fix requires coordinating between multiple actors (such as
   upstream or downstream/dependency projects), or simply
- when proper analysis of the issue and its ramifications demands time.

If we determine that an issue you report requires an embargo, we will discuss 
this with you and try to find a reasonable expiry date (aka “unembargo date”), 
as well as who should be included in the list of need-to-know people.

In any case, embargoes are a process that should be used sparingly, as they 
are painful and time-consuming.

For more information about embargoes and vulnerability disclosure, you can 
refer to [this article](https://aliceevebob.com/2018/01/09/meltdown-and-spectre-thinking-about-embargoes-and-disclosures).

Lastly, in no way should an embargo be understood as a means to avoid making 
Enarx faults public. Transparency is paramount to the Enarx project.

--- 
### Enarx Security Advisories
This page lists all security advisories, vulnerabilities and fixes in Enarx 
itself.

For security issues, vulnerabilities and fixes in underlying TEEs, both in 
SDKs and in hardware, please refer to our 
[page on the subject](https://github.com/enarx/enarx/wiki/TEEs-vulnerabilities-and-attacks/).

If you think you have found a security issue with Enarx, we encourage you to 
report it.
To do so, you may follow the process described in the 
[Vulnerability Disclosure and Embargo Policy](https://github.com/enarx/enarx/wiki/Vulnerability-disclosure-and-embargo-policy) page.

#### List of Enarx Security Advisories
N/A

--- 

## Reference

Much of this RFC is inspired by the [Rust Security Policy](https://www.rust-lang.org/policies/security),
as well as [RFPolicy 2.0](https://dl.packetstormsecurity.net/papers/general/rfpolicy-2.0.txt), 
which it refers to.

## Drawbacks

- The process as currently described makes use of email and OpenPGP. PGP 
  email is notoriously hard to get right, even more so over time.

## Rationale and alternatives

- The most basic alternative is not to have a policy and to simply wait for
people to disclose their findings. This does nothing to provide guarantees 
to researchers and users that their work and time will be respected and to 
encourage further disclosures.

## Prior art

Rust process mentioned above.

## Unresolved questions
As mentioned, encrypted email is not a good solution. It’s really hard to get 
PGP encrypted email right, it offers no Perfect Forward Secrecy (PFS) and key 
management is horrible (cf. [this analysis](https://latacora.micro.blog/2019/07/16/the-pgp-problem.html), 
for instance). However, in the case of just offering a way for people outside 
Enarx to send sensitive information with _some_ security, it may be 
acceptable. 
Key management is still hard: how many copies of the private key? where do 
they live? how do we revocate if maintainers leave project? etc.

In light of this:
- Can we *not* offer email as a way communication channel while remaining 
universal enough to allow everyone to report security issues in Enarx?
- Should we treat email as a public channel, similar to our chat?

## Implementations

N/A

## Future Possibilities

We could offer further official channels for secure communication and
disclosure.

Some ideas are:
- Github: work with Github on security issues reporting (WIP)
- A Private Github repo
- [Keybase](https://keybase.io/encrypt) messaging
- [Signal](https://signal.org): raises question which account (ie: phone number)
- [Secure Drop](https://securedrop.org/) (initially designed for as a way to 
  share and accept documents securely for news organisations, likely overkill)
- A simpler drop box over HTTPS
